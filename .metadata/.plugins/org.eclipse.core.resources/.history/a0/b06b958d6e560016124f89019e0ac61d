package du.iit.dhaka;

import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;

import javax.imageio.ImageIO;



public class LbpMain {

	/**
	 * @param args
	 * @throws IOException 
	 */
	public static void main(String[] args) throws IOException {
		ArrayList<Integer> arr = new ArrayList<Integer>();
		
		BufferedImage image;
		   int width;
		   int height;
		   
		   File file=new File("human.png");
		   image = ImageIO.read(file);
	         width = image.getWidth();
	         height = image.getHeight();
	         
	         int[][] imgval=new int[height][width];
	         int[][] imagefile=new int[height][width];
	         for(int i=0; i<height; i++){
	             
	             for(int j=0; j<width; j++){
	             
	                Color c = new Color(image.getRGB(j, i));
	                //System.out.println("S.No: " +count + " Red: " + c.getRed() +"  Green: " + c.getGreen() + " Blue: " + c.getBlue());
	                
	                int red = (int)(c.getRed() * 0.299);
	                 int green = (int)(c.getGreen() * 0.587);
	                 int blue = (int)(c.getBlue() *0.114);
	                 Color newColor = new Color(red+green+blue,
	                         
	                         red+green+blue,red+green+blue);
	                int tem=newColor.getRGB();
	                imgval[i][j]=tem;
	               // arr.add(imageVlaue/3);
	                
	             }
	          }
	         
	         
	         
	         
	         for (int i = 0; i < height-2; i++) {
				for (int j = 0; j < width-2; j++) {
					//System.out.println(imgval[i][j]);
					
					//int[ ][ ] aryNumbers = new int[3][3];
					int[ ][ ] binary = new int[3][3];
						int bin1=0;
						
					for (int i1 = i; i1 < i+3; i1++) {
						int bin2=0;
						for (int j1 = j; j1 <j+3; j1++) {
							
							if(!(i1==i+1&&j1==j+1)){
								//System.out.println(i+""+j+" "+aryNumbers[i][j]);
								if(imgval[i1][j1]>=imgval[i+1][j+1]){
									binary[bin1][bin2]=1;
								}else{binary[bin1][bin2]=0;}
								
							}else{binary[1][1]=imgval[i][j];}
							
							bin2++;
						}
					bin1++;
						
					}
					
					
					int[] binaryarray=new int[8];
					int flag=0;
			for (int i1 = 0; i1 < 3; i1++) {
				for (int j1 = 0; j1 < 3; j1++) {
					//System.out.println(i1+""+j1+" "+binary[i][j]);
					if(!(i1==1&&j1==1)){
					
						binaryarray[flag]=binary[i1][j1];
						flag++;
					}
				}
				
			}
			
			String s=null;
			String y = "0";
			for(int i1=0;i1<binaryarray.length;i1++){
			s=String.valueOf(binaryarray[i1]);
			
			 y=y+s;
			
			}
			 int decimalNumber = Integer.parseInt(y,2);
			
			 imagefile[i][j]=decimalNumber;
			
			//System.out.println(decimalNumber);
				}
			}
	         
	         BufferedImage bufferImage2=new BufferedImage(width, height,BufferedImage.TYPE_INT_RGB);
	         
	        
	         for (int k = 0; k < imagefile.length; k++) {
				for (int k2 = 0; k2 < imagefile.length; k2++) {
					//System.out.println(imagefile[k][k2]);
					int Pixel=imagefile[k2][k];
					bufferImage2.setRGB(k, k2,Pixel);
				}
			}
	         
	         File outputfile = new File("D:/number/saved.jpg");
	         ImageIO.write(bufferImage2, "jpg", outputfile);
	         
	         
	         
	         
	         

	}

}
